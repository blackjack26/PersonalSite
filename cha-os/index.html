<!DOCTYPE HTML>
<html>
<script type="text/javascript" src="../public/js/amplitude.js"></script>
<script type="text/javascript">
    amplitude.getInstance().logEvent('PAGE_LOAD', { page: '/cha-os' });
</script>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta name="author" content="Jack Grzechowiak"/>
    <link rel="icon" href="public/images/chaos_alpha_logo.png"/>
    <link rel="stylesheet" href="public/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="public/css/bulma.css" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Baloo+Bhaijaan" rel="stylesheet"/>
    <link rel="stylesheet" href="public/css/tsos.css" type="text/css" media="screen"/>
    <title>
        ChaOS - TypeScript Operating System
    </title>

    <!-- Globals CONSTANTS and _Variables. Must included be first. -->
    <script type="text/javascript" src="distrib/globals.js"></script>
    <script type="text/javascript" src="public/js/moment.min.js"></script>

    <!-- Host (Virtual Machine / Hardware Simulation) Routines -->
    <script type="text/javascript" src="distrib/host/control.js"></script>
    <script type="text/javascript" src="distrib/host/devices.js"></script>
    <script type="text/javascript" src="distrib/host/cpu.js"></script>
    <script type="text/javascript" src="distrib/host/memory.js"></script>
    <script type="text/javascript" src="distrib/host/disk.js"></script>

    <!-- Virtual OS Routines: Make sure Kernel code is last, since it needs those above it. -->
    <script type="text/javascript" src="distrib/os/interrupt.js"></script>
    <script type="text/javascript" src="distrib/os/canvastext.js"></script>
    <script type="text/javascript" src="distrib/os/console.js"></script>
    <script type="text/javascript" src="distrib/os/deviceDriver.js"></script>
    <script type="text/javascript" src="distrib/os/deviceDriverKeyboard.js"></script>
    <script type="text/javascript" src="distrib/os/deviceDriverFileSystem.js"></script>
    <script type="text/javascript" src="distrib/os/queue.js"></script>
    <script type="text/javascript" src="distrib/os/shell.js"></script>
    <script type="text/javascript" src="distrib/os/shellCommand.js"></script>
    <script type="text/javascript" src="distrib/os/userCommand.js"></script>
    <script type="text/javascript" src="distrib/os/kernel.js"></script>
    <script type="text/javascript" src="distrib/os/mmu.js"></script>
    <script type="text/javascript" src="distrib/os/pcb.js"></script>
    <script type="text/javascript" src="distrib/os/scheduler.js"></script>

    <!-- Other Routines -->
    <script type="text/javascript" src="distrib/utils.js"></script>
    <!-- Uncomment the line below to enable GLaDOS testing. -->
    <!--script type="text/javascript" src="http://alanclasses.github.io/TSOS/test/glados-ip4.js"></script-->

</head>

<body onload="onDocumentLoad()" class="hero is-dark is-bold is-fullheight" style="overflow-y: auto;">
<div id="start-view" class="hero-body">
    <div class="container has-text-centered">
        <p class="title" onclick="turnOn();">
            <i id="start-icon" class="has-shadow fa fa-power-off fa-fw" aria-hidden="true"></i>
        </p>
    </div>
</div>
<div id="os-view" class="is-hidden">
    <div class="hero-head">
        <header class="nav">
            <div class="container">
                <div class="nav-left">
                    <a class="nav-item" id="title">
                        <h1>ChaOS</h1>
                    </a>
                </div>
                <div class="nav-right nav-menu">
                    <p id="current-date" class="nav-item"></p>
                    <p class="nav-item">
                        <button type="button" id="btnStartOS" name="brnStartOS"
                                class="button" tabindex="0"
                                onclick="TSOS.Control.hostBtnStartOS_click(this);">
                            <i class="fa fa-power-off fa-fw" aria-hidden="true"></i>
                        </button>
                    </p>
                    <p class="nav-item">
                        <button type="button" id="btnHaltOS" name="brnHaltOS"
                                class="button" tabindex="1" disabled
                                onclick="TSOS.Control.hostBtnHaltOS_click(this);">
                            <i class="fa fa-stop fa-fw" aria-hidden="true"></i>
                        </button>
                    </p>
                    <p class="nav-item">
                        <button type="button" id="btnReset" name="brnReset"
                                class="button" tabindex="2" disabled
                                onclick="TSOS.Control.hostBtnReset_click(this);">
                            <i class="fa fa-repeat fa-fw" aria-hidden="true"></i>
                        </button>
                    </p>
                    <div class="nav-item field has-addons">
                        <p class="control">
                            <button class="button" onclick="TSOS.Control.hostBtnSingleStep_click(this);"
                                    id="btnSingleStep" disabled>
                                Single-Step:&nbsp;&nbsp;<span><b id="stepDisplay">OFF</b></span>
                            </button>
                        </p>
                        <p class="control">
                            <button class="button" onclick="TSOS.Control.hostBtnStep_click(this)"
                                    id="btnNextStep" disabled>
                                <span><i class="fa fa-angle-double-right" aria-hidden="true"></i></span>
                            </button>
                        </p>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <div id="message-wrapper">
        <p id="status-message"></p>
    </div>
    <div class="hero-body" style="padding-top: 0">
        <div class="columns" style="max-width: 1500px; margin: 0 auto">
            <div class="column is-narrow">
                <div class="card" id="canvas-card">
                    <div id="canvas-wrapper" class="card-content"
                         style="overflow-y: auto; padding: 0.5rem; background-color: #FDF6E3; max-height: 523px;">
                        <canvas id="display"
                                width="500px"
                                height="500px"
                                tabindex="3">
                        </canvas>
                    </div>
                </div>
            </div>

            <div id="right-column" class="column is-one-third">
                <div id="divLog">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Host Log
                            </p>
                        </header>
                        <div class="card-content" style="height: 100%; min-height: 120px; max-height: 120px">
                            <div id="taHostLog"></div>
                        </div>
                    </div>
                </div><br />
                <div id="divMemory">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Memory
                            </p>
                            <button id="breakpoint-btn" class="button is-danger is-pulled-right is-small" style="margin: 5px;"
                                    onclick="TSOS.Control.hostBtnClearBreakpoints_click(this)" disabled>Clear Breakpoints</button>
                        </header>
                        <div class="card-content" style="height: 100%; min-height: 125px; max-height: 125px">
                            <table class="table is-fullwidth" id="memoryTable"></table>
                        </div>
                    </div>
                </div><br/>
                <div id="divDisk">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Disk
                            </p>
                        </header>
                        <div class="card-content" style="height: 100%; min-height: 125px; max-height: 125px; overflow-x: auto">
                            <table class="table is-fullwidth" id="diskTable"></table>
                            <p id="diskLabel" class="has-text-centered">Disk not formatted <span class="fa fa-frown-o"></span></p>
                        </div>
                    </div>
                </div><br/>
            </div>

            <div class="column is-one-third">
                <div id="divProcesses">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Processes (PCBs)
                            </p>
                        </header>
                        <div class="card-content" style="height: 100%; min-height: 120px; max-height: 120px">
                            <table id="processTable" class="table is-fullwidth"></table>
                            <p id="processLabel" class="has-text-centered"></p>
                        </div>
                    </div>
                </div><br/>
                <div id="divCPU">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                CPU
                            </p>
                        </header>
                        <div class="card-content" style="height: 100%; min-height: 125px; max-height: 125px">
                            <table id="cpuTable" class="table is-fullwidth has-text-centered"></table>
                            <p class="has-text-centered has-text-grey-light">Schedule: <b><span id="schedule">Round Robin</span></b></p>
                        </div>
                    </div>
                </div><br/>
                <div id="divUserProgramInput">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                User Program Input
                            </p>
                        </header>
                        <textarea class="textarea card-content" id="taProgramInput" style="height: 100%; min-height: 125px; max-height: 125px; resize: none">A9 00 8D 7B 00 A9 00 8D 7B 00 A9 00 8D 7C 00 A9 00 8D 7C 00 A9 01 8D 7A 00 A2 00 EC 7A 00 D0 39 A0 7D A2 02 FF AC 7B 00 A2 01 FF AD 7B 00 8D 7A 00 A9 01 6D 7A 00 8D 7B 00 A9 01 AE 7B 00 8D 7A 00 A9 00 EC 7A 00 D0 02 A9 01 8D 7A 00 A2 01 EC 7A 00 D0 05 A9 01 8D 7C 00 A9 00 AE 7C 00 8D 7A 00 A9 00 EC 7A 00 D0 02 A9 01 8D 7A 00 A2 00 EC 7A 00 D0 AC A0 7F A2 02 FF 00 00 00 00 61 00 41 00</textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hero-foot">
        <p id="footer">
            Copyright &copy; 2017 Jack Grzechowiak
        </p>
    </div>
</div>
</body>

<script type="text/javascript">
    function turnOn() {
        document.getElementById('start-icon').classList.add('zoom');
        setTimeout(function() {
            document.getElementById('start-view').classList.add('is-hidden');

            document.getElementById('os-view').classList.remove('is-hidden');
            document.getElementById('os-view').classList.add('show');

            document.getElementById('btnStartOS').click();
            setTimeout(function() { document.querySelector('#os-view .hero-head').classList.add('show'); }, 0);
            setTimeout(function() { document.getElementById('canvas-card').classList.add('show'); }, 100);
            setTimeout(function() { document.querySelector('#divLog .card').classList.add('show'); }, 150);
            setTimeout(function() { document.querySelector('#divMemory .card').classList.add('show'); }, 200);
            setTimeout(function() { document.querySelector('#divDisk .card').classList.add('show'); }, 250);
            setTimeout(function() { document.querySelector('#divProcesses .card').classList.add('show'); }, 300);
            setTimeout(function() { document.querySelector('#divCPU .card').classList.add('show'); }, 350);
            setTimeout(function() { document.querySelector('#divUserProgramInput .card').classList.add('show'); }, 400);
        }, 500);
    }
</script>

</html>
